execute as @a[tag=tpa.sender] if score @s tpa.target matches 1.. run function tpa:cancel_tpa
scoreboard players operation @a[tag=tpa.sender] tpa.target = @a[tag=tpa.sender] tpa
tellraw @a[tag=tpa.sender] [{"text":"You have requested to teleport to ","color":"gold"},{"selector":"@s","color":"yellow"},{"text":".\nTo cancel, ","color":"gold"},{"text":"enter","color":"green"},{"text":" or ","color":"gold"},{"text":"click","color":"green"},{"text":" on ","color":"gold"},{"text":"/trigger tpcancel","color":"yellow","clickEvent":{"action":"run_command","value":"/trigger tpcancel"},"hoverEvent":{"action":"show_text","contents":[{"text":"Click to run ","color":"gold"},{"text":"/trigger tpcancel","color":"yellow"},{"text":".","color":"gold"}]}},{"text":".","color":"gold"}]
tellraw @s ["",{"selector":"@a[tag=tpa.sender]","color":"yellow"},{"text":" has requested to teleport to you.\nTo accept, ","color":"gold"},{"text":"enter","color":"green"},{"text":" or ","color":"gold"},{"text":"click","color":"green"},{"text":" on ","color":"gold"},{"text":"/trigger tpaccept","color":"yellow","clickEvent":{"action":"run_command","value":"/trigger tpaccept"},"hoverEvent":{"action":"show_text","contents":[{"text":"Click to run ","color":"gold"},{"text":"/trigger tpaccept","color":"yellow"},{"text":".\nThe ","color":"gold"},{"text":"most recent","color":"red"},{"text":" active teleport request will be accepted.\nEnter ","color":"gold"},{"text":"/trigger tpaccept set <PID>","color":"yellow"},{"text":" instead if this player's request is not the most recent.","color":"gold"}]}},{"text":".\nTo deny, ","color":"gold"},{"text":"enter","color":"green"},{"text":" or ","color":"gold"},{"text":"click","color":"green"},{"text":" on ","color":"gold"},{"text":"/trigger tpdeny","color":"yellow","clickEvent":{"action":"run_command","value":"/trigger tpdeny"},"hoverEvent":{"action":"show_text","contents":[{"text":"Click to run ","color":"gold"},{"text":"/trigger tpdeny","color":"yellow"},{"text":".\nThe ","color":"gold"},{"text":"most recent","color":"red"},{"text":" active teleport request will be denied.\nEnter ","color":"gold"},{"text":"/trigger tpdeny set <PID>","color":"yellow"},{"text":" instead if this player's request is not the most recent.","color":"gold"}]}},{"text":".","color":"gold"}]